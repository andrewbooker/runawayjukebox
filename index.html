<http>
    <head>
        <title>Runaway Jukebox</title>
        <meta charset="utf-8"/>
        <meta property="og:title" content="Runaway Jukebox"/>
        <meta property="og:description" content="Epping-based acoustic/electric pop trio"/>
        <meta property="og:image" content="./rj_landscape.png"/>
        <meta property="og:image:type" content="image/png"/>
        <meta property="og:image:width" content="1000"/>
        <meta property="og:image:height" content="650"/>
        <meta property="og:image:alt" content="Runaway jukebox picture with logo"/>
        <meta property="og:type" content="website"/>
        <meta property="og:type" content="music"/>
        <style>
            body {
                background-color: black;
                color: white;
                font-family: Arial;
                margin: 40px;
                position: relative;
                text-align: center;
            }
            img {
                border-radius: 4%;
            }
            #links {
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .sm-link {
                margin: 10px;
            }
            #about, .about {
                text-align: center;
                margin-top: 30px;
                margin-bottom: 30px;
                font-size: 90%;
            }
            #dates {
                display: flex;
                flex-direction: column;
            }
            #previous-dates {
                font-size: 90%;
                color: rgba(255,255,255,0.6);
            }
            .date-row {
                display: flex;
                justify-content: center;
            }
            .gig-date {
               margin-right: 10px;
               font-weight: bold;
               color: rgba(255,255,255,0.6);
            }
        </style>
    </head>
    <body>
        <div id="links">
            <div class="sm-link"><a href="https://www.instagram.com/RunawayJukeboxBand/"><img src="logo-instagram.png" width="50" height="50"/></a></div>
            <div class="sm-link"><a href="https://www.youtube.com/@RunawayJukeboxBand"><img src="logo-youtube.svg" /></a></div>
            <div class="sm-link"><a href="https://www.facebook.com/profile.php?id=61550095325564"><img src="logo-facebook.svg" /></a></div>
            <div class="sm-link"><a href="https://runawayjukebox.bandcamp.com"><img src="logo-bandcamp.png" width="50" height="50"/></a></div>
        </div>
        <div>
            <img id="main-image" src="rj_landscape.png" />
        </div>
        <div>
            <div id="about">
Runaway Jukebox are an acoustic trio that came together in 2023 to play an extensive range of well-loved covers by the Beatles, Blur and Bowie to Weller, Wham and Stevie Wonder. Recently the band have recorded some originals, and perform these from time to time as their audience allows. Stubbsy's driving guitar and James's jangling electro-acoustic sit either side of Andrew's pulsing percussion, often with full-on three-part vocal harmonies, make up the unique Runaway Jukebox sound, good for functions and parties, or a banging evening out in the local watering hole.
            </div>
            <h2 id="dates-heading">Live dates</h2>
            <div class="dates" id="dates"></div>
            <div class="about">
                Contact us via <a href="https://www.facebook.com/profile.php?id=61550095325564">Facebook</a> or <span id="contact-link"></span> for bookings.
            </div>
            <h3 id="previous-dates-heading">Previous appearances</h3>
            <div class="dates" id="previous-dates"></div>
        </div>
    </body>
    <script>
        const openMic = 1;
        const privateParty = 2;
        const stubbsySolo = 3;

        (function obfuscateEmail() {
            const link = document.getElementById("contact-link");
            const e = [
                114,
                117,
                110,
                97,
                119,
                97,
                121,
                106,
                117,
                107,
                101,
                98,
                111,
                120,
                98,
                97,
                110,
                100,
                64,
                103,
                109,
                97,
                105,
                108,
                46,
                99,
                111,
                109
            ];
            link.innerHTML = e.map(c => "&#" + c + ";").join("");
        })();

        const gigs = [
            ["Half Moon, Bishops Stortford", "2024-06-21"],
            ["Duke Of Wellington, Epping", "2024-06-22"],
            ["Coach & Horses, Leyton", "2024-08-30"],
            ["Highams Park, TBC", "2024-09-08"],
            ["Bar Love, Portobello Road, London", "2024-09-12"],
            ["Berkhamsted Beer Festival", "2024-09-14"],
            ["Luna, Leytonstone", "2024-09-28"],
            ["Bar Love, Portobello Road, London", "2024-10-10"],
            ["Bar Love, Portobello Road, London", "2024-11-14"],
            ["Theydon Bois (private party)", "2024-11-30", privateParty],
            ["Hemnall Social Club, Epping", "2024-12-06"],
            ["South Mill Arts Centre, Bishops Stortford", "2025-01-09"],
            ["Black Deer, Loughton", "2024-10-05"],
            ["Gallery, Sawbridgeworth", "2023-09-17"],
            ["Cricketers, Woodford Green", "2023-09-23"],
            ["Hemnall Social Club, Epping", "2023-09-26"],
            ["White Lion, Sawbridgeworth", "2023-10-22", openMic],
            ["Belgian Brewer, Bishops Stortford", "2023-11-16"],
            ["Theydon Oak, Epping", "2023-12-07"],
            ["Cricketers, Woodford Green", "2023-07-27", openMic],
            ["Herald, Sumners, Harlow", "2024-01-03", openMic],
            ["South Mill Arts Centre, Bishops Stortford", "2024-01-11"],
            ["Coppermill, Walthamstow", "2024-02-19", openMic],
            ["Luna, Leytonstone", "2024-03-01"],
            ["Coach & Horses, Leyton", "2024-03-28"],
            ["Half Moon, Bishops Stortford", "2024-04-05"],
            ["South Mill Arts Centre, Bishops Stortford", "2024-04-18"],
            ["County Arms, Highams Park", "2024-04-19"],
            ["Half Moon, Bishops Stortford", "2024-04-26"],
            ["Cricketers, Woodford Green", "2024-05-04"],
            ["Hot Box, Chelmsford", "2024-05-07", openMic],
            ["Loughton Club", "2024-05-11", privateParty],
            ["Southern Maltings, Ware", "2024-05-17"],
            ["Bar Love, Portobello Road, London", "2024-05-23"],
            ["Theydon Oak, Epping", "2024-05-25T14:00Z"],
            ["The Old Bell, Sawbridgeworth", "2024-05-25T20:00Z"],
            ["Coach & Horses, Leyton", "2024-05-31"],
            ["Luna, Leytonstone", "2024-06-07"],
            ["Duke Of Wellington, Epping", "2024-11-16"],
            ["Theydon Oak, Epping (Stubbsy solo)", "2024-07-04", stubbsySolo],
            ["Belgian Brewer, Bishops Stortford (Stubbsy solo)", "2024-09-19", stubbsySolo]
        ];

        const img_size = { width: "400", height: "260" };
        const main_image = document.getElementById("main-image");
        const ratio = window.devicePixelRatio == 1.0 ? 1.0 : 0.9 * window.innerWidth / screen.width;
        main_image.setAttribute("width", img_size.width * ratio);
        main_image.setAttribute("height", img_size.height * ratio);
        document.getElementById("dates-heading").setAttribute("style", "font-size: " + (200 * ratio) + "%");
        const f = 100 * ratio;

        const options = { year: "numeric", month: "short", day: "2-digit" };
        const dates = document.getElementById("dates");
        const today = new Date();
        const toGigDateTime = (d) => new Date(d.includes("T") ? d : d + "T20:00Z");
        const sortedGigs = gigs.sort((a, b) => {
            const d1 = toGigDateTime(a[1]).getTime();
            const d2 = toGigDateTime(b[1]).getTime();
            if (d1 === d2) {
                return 0;
            }
            return d1 < d2 ? -1 : 1;
        });

        sortedGigs.forEach(g => {
            const gigDate = toGigDateTime(g[1]);
            if (gigDate > today) {
                const loc = document.createTextNode(g[0]);
                const d = document.createTextNode(gigDate.toLocaleDateString("en-GB", options));

                gig = document.createElement("div");
                gig.className = "date-row";

                const left = document.createElement("div");
                const right = document.createElement("div");
                left.className = "gig-date";
                right.className = "gig-location";
                left.appendChild(d);
                right.appendChild(loc);
                gig.setAttribute("style", "font-size: " + f + "%");

                gig.appendChild(left);
                gig.appendChild(right);
                dates.appendChild(gig);
            }
        });

        const about = document.getElementById("about");
        if (ratio === 1.0) {
            about.setAttribute("style", "margin: 30px 16% 30px 16%; font-size: 100%;");
        }

        const olderGigs = gigs.sort((a, b) => {
            const d1 = toGigDateTime(a[1]).getTime();
            const d2 = toGigDateTime(b[1]).getTime();
            if (d1 === d2) {
                return 0;
            }
            return d1 > d2 ? -1 : 1;
        });
        const olderDates = document.getElementById("previous-dates");
        sortedGigs.forEach(g => {
            const gigDate = toGigDateTime(g[1]);
            if (gigDate < today) {
                const loc = document.createTextNode(g[0]);
                const d = document.createTextNode(gigDate.toLocaleDateString("en-GB", options));

                gig = document.createElement("div");
                gig.className = "date-row";

                const left = document.createElement("div");
                const right = document.createElement("div");
                left.className = "gig-date";
                right.className = "gig-location";
                left.appendChild(d);
                right.appendChild(loc);
                gig.setAttribute("style", "font-size: " + f + "%");

                gig.appendChild(left);
                gig.appendChild(right);
                olderDates.appendChild(gig);
            }
        });

    </script>
</http>
